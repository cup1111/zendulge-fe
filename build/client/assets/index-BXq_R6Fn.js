import{a as r,p}from"./chunk-NISHYRIK-qw7nT2B7.js";import{a as m}from"./index-Dg6qQOkt.js";import{P as y,d as M,u as U}from"./index-B5WhblA5.js";import{u as x}from"./utils-7ZUSlCJU.js";import{u as D}from"./index-Dgh5HF9Y.js";import{R as j}from"./index-C_Qdxtew.js";function z(t,e=globalThis?.document){const s=D(t);r.useEffect(()=>{const i=n=>{n.key==="Escape"&&s(n)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[s,e])}var K="DismissableLayer",b="dismissableLayer.update",V="dismissableLayer.pointerDownOutside",Y="dismissableLayer.focusOutside",R,T=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),S=r.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:i,onPointerDownOutside:n,onFocusOutside:a,onInteractOutside:d,onDismiss:l,...E}=t,c=r.useContext(T),[u,N]=r.useState(null),f=u?.ownerDocument??globalThis?.document,[,A]=r.useState({}),F=x(e,o=>N(o)),P=Array.from(c.layers),[W]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=P.indexOf(W),O=u?P.indexOf(u):-1,k=c.layersWithOutsidePointerEventsDisabled.size>0,L=O>=_,H=q(o=>{const v=o.target,C=[...c.branches].some(h=>h.contains(v));!L||C||(n?.(o),d?.(o),o.defaultPrevented||l?.())},f),w=G(o=>{const v=o.target;[...c.branches].some(h=>h.contains(v))||(a?.(o),d?.(o),o.defaultPrevented||l?.())},f);return z(o=>{O===c.layers.size-1&&(i?.(o),!o.defaultPrevented&&l&&(o.preventDefault(),l()))},f),r.useEffect(()=>{if(u)return s&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(R=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),g(),()=>{s&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=R)}},[u,f,s,c]),r.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),g())},[u,c]),r.useEffect(()=>{const o=()=>A({});return document.addEventListener(b,o),()=>document.removeEventListener(b,o)},[]),p.jsx(y.div,{...E,ref:F,style:{pointerEvents:k?L?"auto":"none":void 0,...t.style},onFocusCapture:m(t.onFocusCapture,w.onFocusCapture),onBlurCapture:m(t.onBlurCapture,w.onBlurCapture),onPointerDownCapture:m(t.onPointerDownCapture,H.onPointerDownCapture)})});S.displayName=K;var X="DismissableLayerBranch",B=r.forwardRef((t,e)=>{const s=r.useContext(T),i=r.useRef(null),n=x(e,i);return r.useEffect(()=>{const a=i.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),p.jsx(y.div,{...t,ref:n})});B.displayName=X;function q(t,e=globalThis?.document){const s=D(t),i=r.useRef(!1),n=r.useRef(()=>{});return r.useEffect(()=>{const a=l=>{if(l.target&&!i.current){let E=function(){I(V,s,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",n.current),n.current=E,e.addEventListener("click",n.current,{once:!0})):E()}else e.removeEventListener("click",n.current);i.current=!1},d=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",a),e.removeEventListener("click",n.current)}},[e,s]),{onPointerDownCapture:()=>i.current=!0}}function G(t,e=globalThis?.document){const s=D(t),i=r.useRef(!1);return r.useEffect(()=>{const n=a=>{a.target&&!i.current&&I(Y,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",n),()=>e.removeEventListener("focusin",n)},[e,s]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function g(){const t=new CustomEvent(b);document.dispatchEvent(t)}function I(t,e,s,{discrete:i}){const n=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&n.addEventListener(t,e,{once:!0}),i?M(n,a):n.dispatchEvent(a)}var ae=S,ce=B,J="Portal",Q=r.forwardRef((t,e)=>{const{container:s,...i}=t,[n,a]=r.useState(!1);U(()=>a(!0),[]);const d=s||n&&globalThis?.document?.body;return d?j.createPortal(p.jsx(y.div,{...i,ref:e}),d):null});Q.displayName=J;var Z=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),$="VisuallyHidden",ee=r.forwardRef((t,e)=>p.jsx(y.span,{...t,ref:e,style:{...Z,...t.style}}));ee.displayName=$;export{ce as B,S as D,Q as P,ae as R,ee as V,Z as a};
